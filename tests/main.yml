---
- hosts: localhost
  connection: local
  sudo: yes
  tasks:
    # Tests
    - name: Check mesos-master service
      shell: service mesos-master status | grep "running"
      register: master_service_status
      ignore_errors: yes

    - fail: msg="mesos-master service is not running."
      when: master_service_status.stdout == ""
      when: ansible_os_family == "Debian"

    - name: Check mesos-slave service
      shell: service mesos-slave status | grep "running"
      register: slave_service_status
      ignore_errors: yes
    - fail: msg="mesos-slave service is not running."
      when: slave_service_status.stdout == ""
      when: ansible_os_family == "Debian"
